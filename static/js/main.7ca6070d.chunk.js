(this["webpackJsonpfcc-dungeon-crawler"]=this["webpackJsonpfcc-dungeon-crawler"]||[]).push([[0],{14:function(n,t,e){},15:function(n,t,e){"use strict";e.r(t);var i=e(0),r=e.n(i),a=e(3),o=e.n(a),h=(e(14),e(4)),c=e(5),s=e(7),u=e(6),f=e(1),l=e(8),v=[{x:-1,y:0},{x:0,y:-1},{x:1,y:0},{x:0,y:1}];function d(n,t,e){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,r=[],a=0;a<t;a++)r.push(new Array(n).fill(1));for(var o=[],h=0,c=function(){h++},s=function(n,t,e){n[t.y][t.x]=e,o[t.y][t.x]=h},u=r.length,f=r[0].length,l=0;l<u;l++)o.push(Array(f).fill(0));m(r,f,u,c,s,e);for(var v=1;v<u;v+=2)for(var d=1;d<f;d+=2)1===r[v][d]&&(h++,y(r,s,{x:d,y:v},i));return g(r,f,u,h,o),x(r,f,u),{width:n,height:t,data:r}}function m(n,t,e,i,r,a){for(var o=Math.max(Math.min(t/10,e/10),1),h=[],c=0;c<a;c++){var s=1+(k(Math.max(1,o/2),o)<<1),u=k(0,s>>1)<<1,f=s,l=s;0===k(0,1)?f+u<t/2&&(f+=u):l+u<e/2&&(l+=u);var v=1+(k(0,t-f-1>>1)<<1),d=1+(k(0,e-l-1>>1)<<1);if(!(v+f>t-1||d+l>e-1)){for(var m={x:v,y:d,width:f,height:l},y=!1,g=0;g<h.length;g++){if(b(m,h[g])){y=!0;break}}if(!y){h.push(m),i();for(var x=0;x<f;x++)for(var w=0;w<l;w++)r(n,{x:v+x,y:d+w},2)}}}}function y(n,t,e,i){var r,a=n.length,o=n[0].length,h=[];for(t(n,e,0),n[e.y][e.x]=0,h.push(e);h.length>0;){for(var c=h[h.length-1],s=[],u=0;u<v.length;u++){var f=v[u];w(n,o,a,c,f)&&s.push(f)}if(s.length>0){var l=void 0,d=p(c,l=s.includes(r)&&Math.random()>i?r:s[Math.floor(Math.random()*s.length)],1),m=p(c,l,2);t(n,d,0),t(n,m,0),h.push(p(c,l,2)),r=l}else h.pop(),r=null}}function g(n,t,e,i,r){function a(n,t){n[t.y][t.x]=0}for(var o=[],h=1;h<e-1;h++)for(var c=1;c<t-1;c++)if(1===n[h][c]){for(var s=[],u=0;u<v.length;u++){var f=v[u],l=r[h+f.y][c+f.x];0===l||s.includes(l)||s.push(l)}s.length<2||o.push({x:c,y:h,regions:s})}for(var d=[0],m=[],y=1;y<=i;y++)d.push(y),m.push(y);for(var g=function(){var t=k(0,o.length-1),e=o[t];a(n,{x:e.x,y:e.y});for(var r=e.regions.map((function(n){return d[n]})),h=r[0],c=r.slice(1),s=0;s<=i;s++)c.includes(s)&&(d[s]=h);m=m.filter((function(n){return!c.includes(n)})),o=o.filter((function(t){if(Math.abs(t.x-e.x)<=1&&Math.abs(t.y-e.y)<=1)return!1;t.regions=t.regions.map((function(n){return d[n]}));for(var i=1;i<t.regions.length;i++)if(t.regions[i]!==t.regions[0])return!0;return 0===k(0,99)&&a(n,{x:t.x,y:t.y}),!1}))};m.length>1&&o.length>0;)g()}function x(n,t,e){function i(n,t){n[t.y][t.x]=1}for(var r=!1;!r;){r=!0;for(var a=1;a<e-1;a++)for(var o=1;o<t-1;o++)if(1!==n[a][o]){for(var h=0,c=0;c<v.length;c++){var s=v[c];1!==n[a+s.y][o+s.x]&&h++}1===h&&(r=!1,i(n,{x:o,y:a}))}}}function w(n,t,e,i,r){if(!function(n,t,e){if(e.x<0||e.y<0||e.x>=n||e.y>=t)return!1;return!0}(t,e,p(i,r,3)))return!1;var a=p(i,r,2);return 1===n[a.y][a.x]}function p(n,t,e){return{x:n.x+t.x*e,y:n.y+t.y*e}}function k(n,t){return Math.floor(Math.random()*(t-n+1))+n}function b(n,t){return!(n.x>t.x+t.width||t.x>n.x+n.width)&&!(n.y>t.y+t.height||t.y>n.y+n.height)}var M=function(n){function t(n){var e;return Object(h.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this,n))).onResize=e.onResize.bind(Object(f.a)(e)),e.onAnimationFrame=e.onAnimationFrame.bind(Object(f.a)(e)),e.onClick=e.onClick.bind(Object(f.a)(e)),e.state={map:d(101,53,1e3)},e}return Object(l.a)(t,n),Object(c.a)(t,[{key:"componentDidMount",value:function(){this._resizeViewport(),window.addEventListener("resize",this.onResize),this.frame=window.requestAnimationFrame(this.onAnimationFrame)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),window.cancelAnimationFrame(this.frame)}},{key:"onResize",value:function(){this._resizeViewport()}},{key:"onAnimationFrame",value:function(){this._drawMap(),this.frame=window.requestAnimationFrame(this.onAnimationFrame)}},{key:"onClick",value:function(){this.setState({map:d(101,53,1e3)})}},{key:"_resizeViewport",value:function(){var n=this.canvas,t=n.getBoundingClientRect();n.width=t.width,n.height=t.height}},{key:"_drawMap",value:function(){var n=this.state.map,t=n.width,e=n.height,i=n.data,r=this.canvas.getContext("2d");r.fillStyle="#FFFFFF",r.fillRect(0,0,this.canvas.width,this.canvas.height),r.fillStyle="#000000";for(var a=Math.floor(this.canvas.width/t),o=Math.floor(this.canvas.height/e),h=0;h<e;h++)for(var c=0;c<t;c++)1!==i[h][c]&&r.fillRect(c*a,h*o,a,o)}},{key:"render",value:function(){var n=this;return r.a.createElement("div",{className:"screen"},r.a.createElement("canvas",{id:"canvas",ref:function(t){return n.canvas=t},onClick:this.onClick}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))},9:function(n,t,e){n.exports=e(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.7ca6070d.chunk.js.map